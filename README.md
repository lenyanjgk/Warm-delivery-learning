# 暖送外卖项目学习文档  (以下为AI描绘)
## 一、项目概述
“暖送外卖”是一款专为餐饮企业（餐厅、饭店）定制的软件产品，由系统管理后台和小程序端应用两部分构成。管理后台方便餐饮企业内部员工进行各类操作，像餐厅数据管理维护、统计以及来单语音播报等；小程序端则服务于广大消费者，支持在线浏览菜品、下单、支付等功能，旨在为用户提供便捷的外卖订餐服务。

## 二、学习内容与收获
通过对本项目的学习，能够全面深入地了解软件开发的完整流程，涵盖从需求分析、设计、编码，到测试以及上线运维各个阶段的具体操作和要点。同时，还可以清晰掌握软件开发过程中不同岗位角色的分工与职责，以及开发过程中常用的三种软件环境（开发环境、测试环境、生产环境）各自的作用与特点。

## 三、课程内容详细介绍
### （一）软件开发整体介绍
1. **软件开发流程**
    - **需求分析**：需完成需求规格说明书（运用Word文档细致描述项目各组成部分，例如系统定义、功能规格等内容）和产品原型（借助网页形式直观展示页面的数据呈现、布局样式以及交互效果）的编写工作。
    - **设计**：
        * **UI设计**：着重于设计项目的页面视觉效果，从细微的按钮设计到整体的页面布局，同时体现人机交互逻辑。
        * **数据库设计**：明确项目涉及的数据库，规划每个数据库内包含的表结构，梳理表与表之间的关联关系，以及各表结构中涵盖的具体字段信息。
        * **接口设计**：先是通过对原型图进行粗粒度分析，确定每个页面包含的接口数量，而后再细粒度剖析每个接口的传入参数、返回值参数，同时清晰界定接口路径及请求方式。
    - **编码**：作为软件开发工程师，要针对项目模块功能展开编码实现，并在编码完成后进行单元测试，只有单元测试通过才能进入下一阶段。
    - **测试**：由专业的测试人员在测试环境中对已部署好的项目执行功能测试，并最终出具相应的测试报告。
    - **上线运维**：运维人员负责准备服务器端的软件环境，完成安装与配置工作后，将开发好的项目部署到服务器上，使其正式上线运行。

3. **软件环境**
    - **开发环境（development）**：这是软件开发人员在开发阶段专属使用的环境，外部用户通常无法进行访问。例如在开发过程中使用的MySQL数据库以及其他常用软件，既可以安装在本地计算机上，也可以部署在专门的服务器中，不过在项目进入测试和上线阶段时，就不再使用该环境了。
    - **测试环境（testing）**：当软件开发工程师完成项目功能模块的开发，并且相应的单元测试顺利通过后，就需要将项目部署到专门为测试人员准备的测试服务器上，这就是测试环境。该环境主要用于项目的测试工作，同样外部用户一般是无法访问的。
    - **生产环境（production）**：一旦项目开发完毕，并且经过测试人员的严格测试并通过之后，便可将项目部署到线上环境，也就是生产环境，进而正式对外提供服务，常见的生产环境可以依托机房或者云服务器来搭建。

### （二）暖送外卖项目介绍
1. **项目介绍**
    - **管理端功能**：提供员工登录/退出、员工信息管理、分类管理（涵盖菜品分类与套餐分类）、菜品管理、套餐管理、菜品口味管理、订单管理、数据统计以及来单提醒等丰富功能，全方位助力餐饮企业内部运营管理。
    - **用户端功能**：支持微信登录方式，方便用户管理收件人地址、查询历史订单，还能进行菜品规格查询、使用购物车功能、完成下单与支付操作，以及轻松浏览菜品分类及具体菜品信息，为消费者打造便捷的点餐体验。
2. **产品原型**
    - **管理端**：主要供餐饮企业内部员工使用，各功能模块都有清晰明确的操作细节，详细的管理端原型图可在课程资料相应文件夹下查看获取。
    - **用户端**：作为移动端应用面向广大消费者，在点餐流程、购物车操作、订单支付以及个人信息管理等诸多方面均具备完善且实用的功能，对应的用户端原型图同样可在课程资料中找到。
3. **技术选型**
    - **用户层**：在构建系统管理后台的前端页面时，会运用到H5、Vue.js、ElementUI、apache echarts（用于展示图表）等技术；而针对移动端应用的构建，则选用微信小程序技术来实现。
    - **网关层**：Nginx扮演着Http服务器的角色，除了部署静态资源外，其反向代理和负载均衡的功能尤为重要，例如在项目部署时，可借助Nginx来实现Tomcat的负载均衡，优化服务器性能。
    - **应用层**：
        * **SpringBoot**：秉持“约定优于配置”的理念，能够快速搭建Spring项目，极大简化Spring项目的配置开发流程。
        * **SpringMVC**：作为spring框架的一个重要模块，可与spring无缝集成，无需中间整合层介入。
        * **Spring Task**：由Spring提供的定时任务框架，满足项目中定时任务相关需求。
        * **httpclient**：主要用于实现对http请求的发送操作。
        * **Spring Cache**：Spring提供的数据缓存框架，提升数据访问效率。
        * **JWT**：用于对应用程序上的用户进行身份验证，保障系统安全。
        * **阿里云OSS**：提供对象存储服务，在项目中可用于存储如图片等各类文件。
        * **Swagger**：能够自动为开发人员生成接口文档，并支持对接口进行测试，方便开发过程中的接口管理与调试。
        * **POI**：对Excel表格的常用操作进行了封装，便于在项目中处理表格数据。
        * **WebSocket**：一种通信网络协议，能让客户端和服务器之间的数据交换变得更加简便，在项目的来单、催单功能实现方面发挥作用。
    - **数据层**：
        * **MySQL**：作为关系型数据库，负责存储本项目的核心业务数据，确保数据的完整性和一致性。
        * **Redis**：基于key-value格式存储的内存数据库，具备极快的访问速度，常被用作缓存来提升系统性能。
        * **Mybatis**：用于项目的持久层开发，实现数据持久化操作。
        * **pagehelper**：分页插件，方便在数据展示时进行分页处理。
        * **spring data redis**：简化了java代码操作Redis的API，提高开发效率。
    - **工具**：
        * **git**：强大的版本控制工具，在团队协作开发项目时，可有效管理项目中的代码版本，便于追溯和协同工作。
        * **maven**：项目构建工具，帮助自动化构建项目，管理项目依赖等。
        * **junit**：单元测试工具，开发人员在完成功能代码实现后，可借助它对功能进行单元测试，确保代码质量。
        * **postman**：接口测试工具，能够模拟用户发起的各类HTTP请求，并获取对应的响应结果，辅助开发人员进行接口调试。

### （三）开发环境搭建
1. **前端环境搭建**
    - 前端工程基于nginx开展，首先从资料中找到前端运行环境的nginx文件，然后将其移动到非中文目录下，接着通过双击nginx.exe来启动nginx服务，之后便可通过访问[http://localhost:80进行相关的测试操作。](http://localhost:80进行相关的测试操作。)
2. **后端环境搭建**
    - **熟悉项目结构**：后端工程采用maven进行项目构建，并且按照功能模块进行了划分。其中，sky-take-out作为maven父工程，主要负责统一管理依赖版本，并聚合其他各个子模块；sky-common子模块用于存放公共类，像工具类、常量类、异常类等；sky-pojo子模块则用来存放实体类、VO、DTO等相关类；sky-server子模块涵盖了后端服务相关的配置文件、Controller、Service、Mapper等核心内容。下面详细介绍各子模块内不同包的具体作用：
        * **sky-common**：
            + **constant**：存放项目相关的常量类。
            + **context**：存放上下文类。
            + **enumeration**：用于存储项目的枚举类。
            + **exception**：存放自定义的异常类。
            + **json**：处理json转换的相关类所在之处。
            + **properties**：放置SpringBoot相关的配置属性类。
            + **result**：对返回结果类进行封装操作的类存放在此。
            + **utils**：包含了各种常用的工具类。
        * **sky-pojo**：
            + **Entity**：实体类，通常和数据库中的表一一对应，用于映射数据库数据。
            + **DTO**：数据传输对象，在程序各层之间传递数据时发挥作用，便于数据的流转与处理。
            + **VO**：视图对象，主要是为前端展示数据而提供的对象，对要展示的数据进行整合与包装。
            + **POJO**：普通Java对象，仅包含属性以及对应的getter和setter方法，作为简单的数据载体。
        * **sky-server**：
            + **config**：存放各类配置类，用于配置项目运行的相关参数和规则。
            + **controller**：存放controller类，负责接收前端请求，并调用相应的服务进行处理，然后返回结果给前端。
            + **interceptor**：拦截器类所在的包，可用于实现诸如权限验证、日志记录等功能，在请求处理过程中进行拦截与处理。
            + **mapper**：存放mapper接口，用于定义数据库操作的方法，与Mybatis等持久层框架配合实现数据持久化和查询等操作。
            + **service**：存放service类，编写具体的业务逻辑代码，调用mapper接口实现对数据库的操作，并处理复杂的业务逻辑关系。
            + **SkyApplication**：项目的启动类，是整个后端服务启动的入口点。
    - **Git版本控制**：
        * **创建Git本地仓库**：在Idea中进行相关操作，当出现相应提示时，表明本地仓库创建成功。
        * **创建Git远程仓库**：访问[https://gitee.com/，按照操作流程新建仓库。](https://gitee.com/，按照操作流程新建仓库。)
        * **将本地文件推送到Git远程仓库**：首先提交文件至本地仓库（忽略特定类型文件），然后添加Git远程仓库地址，最后执行推送操作，将本地文件成功推送至远程仓库。
    - **数据库环境搭建**：从资料中找到sky.sql文件，直接打开该文件即可进行数据库创建操作，无需提前手动创建数据库，执行该文件后会创建出11张表，各表信息如下：
        * **序号**：1，**表名**：employee，**中文名**：员工表
        * **序号**：2，**表名**：category，**中文名**：分类表
        * **序号**：3，**表名**：dish，**中文名**：菜品表
        * **序号**：4，**表名**：dish_flavor，**中文名**：菜品口味表
        * **序号**：5，**表名**：setmeal，**中文名**：套餐表
        * **序号**：6，**表名**：setmeal_dish，**中文名**：套餐菜品关系表
        * **序号**：7，**表名**：user，**中文名**：用户表
        * **序号**：8，**表名**：address_book，**中文名**：地址表
        * **序号**：9，**表名**：shopping_cart，**中文名**：购物车表
        * **序号**：10，**表名**：orders，**中文名**：订单表
        * **序号**：11，**表名**：order_detail，**中文名**：订单明细表  
    现阶段可先大致了解各表的存在及存储的数据类型，对于具体的表结构以及字段详情，可参考资料中的《数据库设计文档》，后续在讲解具体功能开发时，也会进一步详细介绍。
    - **前后端联调**：后端的初始工程已经实现了登录功能，可直接在此基础上开展前后端联调测试工作，具体实现思路如下：
        * **Controller层**：在sky-server模块中的com.sky.controller.admin.EmployeeController类里，定义了登录相关的接口方法，接收前端传来的登录数据（EmployeeLoginDTO类型），调用service层方法查询数据库验证登录信息，若登录成功则生成jwt令牌，并封装返回相关登录信息（EmployeeLoginVO类型）给前端。
        * **Service层**：位于sky-server模块的com.sky.service.impl.EmployeeServiceImpl类中，具体实现了员工登录的业务逻辑，先根据用户名查询数据库中的员工数据，接着处理诸如用户名不存在、密码错误、账号被锁定等各种异常情况，最后返回查询到的员工实体对象。
        * **Mapper层**：在sky-server模块的com.sky.mapper.EmployeeMapper接口中，定义了根据用户名查询员工的数据库操作方法，通过Mybatis的注解方式指定了对应的SQL语句，实现与数据库的交互。  
    同时，在调试过程中，可以通过设置断点的方式跟踪后端程序的执行过程，方便排查问题和理解代码逻辑。
    - **nginx反向代理和负载均衡**：
        * **反向代理**：nginx反向代理的作用是将前端发送的动态请求转发到后端服务器，之所以采用这种方式而不是直接通过浏览器请求后台服务端，是因为它具备诸多优势。例如，nginx本身能够进行缓存，当访问同一接口且已做数据缓存时，可直接返回数据，无需再次访问服务端，从而有效提高访问速度；还能进行负载均衡，将大量请求按照设定的方式均匀分配给集群中的各台服务器；并且能够保证后端服务的安全性，由于一般后台服务地址不会对外暴露，将nginx作为请求访问的入口，请求先到达nginx再转发到具体服务中，避免了后端服务直接暴露在外。
        * **负载均衡**：当服务以集群方式进行部署时，nginx在转发请求到服务器时就需要进行负载均衡配置，其本质上也是基于反向代理来实现的。nginx提供了多种负载均衡策略，如轮询（默认方式）、权重方式（可通过设置权重数值来分配不同比例的请求量）、ip_hash（依据访问IP分配请求，使每个访客固定访问一个后端服务）、least_conn（按照最少连接数分配请求，优先将请求分配给连接数少的后端服务）、url_hash（依据请求的URL分配请求，保证相同的URL被分配到同一个后端服务）以及fair（依据响应时间分配请求，响应时间短的服务会被优先分配），并分别介绍了各策略对应的具体配置方式。
    - **完善登录功能**：原项目中员工表的密码采用明文存储，存在安全性较低的问题，解决思路是将密码加密后存储，本项目选用MD5加密方式对明文密码进行加密处理。具体的实现步骤如下：
        * **修改数据库中明文密码**：打开employee表，将其中存储的明文密码修改为MD5加密后的密文形式。
        * **修改Java代码**：在EmployeeServiceImpl.java文件中，对前端提交的密码进行MD5加密处理后，再与数据库中存储的密码进行比对，确保登录验证过程的安全性，同时在代码中对可能出现的密码错误等异常情况进行相应的处理。

### （四）导入接口文档
1. **前后端分离开发流程**
    - **定义接口**：明确接口的路径、请求方式、传入参数以及返回参数等关键信息，这是前后端分离开发的基础，只有接口定义清晰准确，后续的开发工作才能顺利开展。
    - **前端开发人员和后端开发人员并行开发**：双方依据已定义好的接口规范，同时开展各自的开发工作，并可自行进行初步的自测，及时发现和解决开发过程中出现的问题。
    - **前后端人员进行连调测试**：在各自开发完成一定功能模块后，前后端开发人员需要协同进行联合调试测试，确保前端与后端之间的数据交互和功能调用能够正常无误地进行。
    - **提交给测试人员进行最终测试**：经过前后端联调测试确保整体功能基本正常后，将项目提交给专业的测试人员进行全面、细致的最终测试，进一步保证项目的质量和稳定性。
2. **操作步骤**：从课程资料中找到项目接口文件，然后将其导入到YApi平台（访问地址：[http://yapi.smart-xwork.cn/）。具体操作是先在YApi平台创建出两个项目，分别将“暖送外卖-管理端接口.json”和“暖送外卖-用户端.json”文件导入，成功导入后即可为后续的业务开发做好接口管理方面的准备工作。](http://yapi.smart-xwork.cn/）。具体操作是先在YApi平台创建出两个项目，分别将“暖送外卖-管理端接口.json”和“暖送外卖-用户端.json”文件导入，成功导入后即可为后续的业务开发做好接口管理方面的准备工作。)

### （五）Swagger
1. **介绍**：Swagger是一个功能强大、规范且完整的框架，主要用于生成、描述、调用以及可视化RESTful风格的Web服务（具体可参考[https://swagger.io/](https://swagger.io/)

